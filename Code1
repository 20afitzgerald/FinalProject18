import random
class Character:
    """class describing the characters which can be guessed"""

    def __init__(self, name, haircolor, eyecolor, glasses, gender, row, alive):
        self.name = name
        self.haircolor = haircolor
        self.eyecolor = eyecolor
        self.glasses = glasses
        self.gender = gender
        self.row = row
        self.alive = alive

allison = Character("Allison", "blonde", "blue", "no", "female", "third", "True")
beatriz = Character("Beatriz", "brown", "brown", "yes", "female", "first", "True")
cara = Character("Cara", "brown", "hazel", "sometimes", "female", "second", "True")
isabella = Character("Isabella", "brown", "brown", "yes", "female", "first", "True")
janny = Character("Janny", "black", "brown", "yes", "female", "fourth", "True")
jenn = Character("Jenn", "blonde", "brown", "sometimes", "female", "third", "True")
kim = Character("Kim", "black", "brown", "no", "female", "fourth", "True")
lara = Character("Lara", "brown", "hazel", "yes", "female", "fourth", "True")
matt = Character("Matt", "brown", "hazel", "no", "male", "second", "True")
maya = Character("Maya", "brown", "brown", "no", "female", "second", "True")
nicole = Character("Nicole", "brown", "brown", "yes", "female", "first", "True")
nikki = Character("Nikki", "black", "brown", "yes", "female", "first", "True")
omay = Character("Omay", "black", "brown", "yes", "male", "first", "True")
pranav = Character("Pranav", "black", "brown", "yes", "male", "third", "True")
prerna = Character("Prerna", "black", "brown", "sometimes", "female", "third", "True")
yunxiu = Character("Yunxiu", "black", "brown", "no", "female", "fourth", "True")
zach = Character("Zach", "brown", "brown", "no", "male", "fourth", "True")
gerstein = Character("Gerstein", "brown", "brown", "yes", "female", "first", "True")

def grid():
    global person
    rows = 1
    cols = 1

    cells = []

    for y in range(rows):
        row = []
        cells.append(row)

    for row in cells:
        for character in people:
            if character.alive:
                print(character.name, end=' | ')
            else:
                print('X', end=' | ')


people = [allison, beatriz, cara, isabella, janny, jenn, kim, lara, matt, maya, nicole, nikki, omay, pranav, prerna, yunxiu, zach, gerstein]
unchosen_ones = [allison, beatriz, cara, isabella, janny, jenn, kim, lara, matt, maya, nicole, nikki, omay, pranav, prerna, yunxiu, zach, gerstein]
person = random.choice(unchosen_ones)
unchosen_ones.remove(person)
print("Hello! Welcome to Guess Who: B3/4 Programming Special Edition!")
print("The computer has randomly selected one person in this class to be the chosen one. Your job is to ask questions to figure out who it is.\n If you can correctly guess the person with only three attributes, you win. You get two final guesses after these three attributes have been determined.\n If at any point in the game you feel confident that you know the answer, you can make a final guess. But be warned: if this guess is incorrect, you will not get another guess and will therefore lose.\n In case you don't pay very much attention, this is the list of people who can be chosen:")
grid()

def play_again_function():
    play_again = input("Would you like to play again? Type in yes or no.\n")
    global replay
    global person
    global guesses
    if play_again == "yes":
        replay = True
        guesses = 0
        person = random.choice(unchosen_ones)
        unchosen_ones.remove(person)
        for p in people:
            p.alive = True
        grid()
    else:
        print("Thanks for playing!")
        replay = False

replay = True
guesses = 0
while replay == True:
    while guesses < 3:
        question = input("Which attribute would you like to determine? Enter 'haircolor', 'eyecolor', 'glasses', 'gender', or 'row' for a response. If you are ready to make a guess, enter 'guess'.\n")
        guesses += 1
        if question == "haircolor":
            print(person.haircolor)
            for character in people:
                if character.haircolor != person.haircolor:
                    character.alive = False
            grid()
        elif question == "eyecolor":
            print(person.eyecolor)
            for character in people:
                if character.eyecolor != person.eyecolor:
                    character.alive = False
            grid()
        elif question == "glasses":
            print(person.glasses)
            for character in people:
                if character.glasses != person.glasses:
                    character.alive = False
            grid()
        elif question == "gender":
            print(person.gender)
            for character in people:
                if character.gender != person.gender:
                    character.alive = False
            grid()
        elif question == "row":
            print(person.row)
            for character in people:
                if character.row != person.row:
                    character.alive = False
            grid()
        elif question == "guess":
            user_guess = input("Who do you think the person is?\n").title()
            if user_guess == person.name:
                guesses -= 1
                print(f"You guessed correctly! You win with only {guesses} attributes!")
                play_again_function()
            else:
                print("You guessed wrong! You lose!!!")
                play_again_function()
        else:
            print("Invalid input.\n")
            guesses -= 1

    if guesses == 3:
        final_guess1 = input("You already have determined three attributes of the chosen one and must guess. Who do you think it is?\n").title()
        if final_guess1 == person.name:
            print("You guessed correctly! You win!!!")
            play_again_function()
        else:
            final_guess2 = input("That is not the chosen one! You get one more guess, pick carefully.\n").title()
            if final_guess2 == person.name:
                print("You guessed correctly! You win!!!")
                play_again_function()
            else:
                print(f"The chosen one was {person.name}. You guessed wrong! You lose!!!")
                play_again_function()